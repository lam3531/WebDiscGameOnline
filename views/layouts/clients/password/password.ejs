<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bảo mật</title>
    <%- include('../partials/head') %>
</head>
<body>
    <%- include('../partials/header') %>
    
    <div class="container">
        <div class="profile">
            <div class="row">
                <div class="col-3">
                    <div class="side-nav" style="margin-bottom: 85px">
                        <ul class="nav-links">
                            <li style="border-bottom: 1px solid #E6E8EB;">
                                <a href="/profile/<%= userid %>" ><i class="fa-solid fa-user"></i>Tài khoản</a>
                            </li>
                            <li style="border-bottom: 1px solid #E6E8EB;">
                                <a href="/orders/<%= userid %>"><i class="fa-solid fa-cart-shopping"></i>Lịch sử đơn hàng</a>
                            </li>
                            <li class="active" style="border-bottom: 1px solid #E6E8EB;">
                                <a href="/password/<%= userid %>"><i class="fa-solid fa-user-lock"></i>Mật khẩu và bảo mật</a>
                            </li>
                        </ul>
                    </div>
                </div>
    
                <div class="col-9">
                    <div class="security">
                        <div class="security-heading">
                            <h3>Mật khẩu bảo mật</h3>
                            <p>Vì sự an toàn khuyến khích khách hàng sử dụng mật khẩu mạnh</p>
                        </div>
                        <div class=security-body>
                            <div class="changePassword">
                                <h3>Thay đổi mật khẩu</h3>
                                <form action="/changePasswordNew" class="password-change" method="post" style="margin-top: -10px;">
                                    <div class="form-group">
                                        <div class="spann" style="display: flex;">
                                            <span> Mật khẩu cũ </span> 
                                            <%if(password1Error.length > 0){%>
                                                <p style="font-size: 14px; font-weight:600; color: red; margin: 2.5px 0px 0px 5px;"><%= password1Error %></p>
                                            <%}%>
                                        </div>
                                        <input type="password" name="password1" class="box-inputPwd" value="<%= password1ED %>">
                                        <i class="fa-regular fa-eye-slash eyye eye-close"></i>
                                        <i class="fa-regular fa-eye eyye eye-open hidden"></i>
                                    </div>
                                    <div class="form-group">
                                        <input type="hidden" name="userid" value="<%= userid %>">
                                        <div class="spann" style="display: flex;">
                                            <span> Mật khẩu mới </span> 
                                            <%if(passwordError.length > 0){%>
                                                <p style="font-size: 14px; font-weight:600; color: red; margin: 2.5px 0px 0px 5px;"><%= passwordError %></p>
                                            <%}%>
                                        </div>
                                        <input type="password" name="password" class="box-inputPwdd" value="<%= passwordED %>">
                                        <i class="fa-regular fa-eye-slash eyye eye-closee"></i>
                                        <i class="fa-regular fa-eye eyye eye-openn hidden"></i>
                                    </div>

                                    <div class="form-group">
                                        <div class="spann" style="display: flex;">
                                            <span> Nhập lại mật khẩu mới </span>
                                        </div> 
                                        <input type="password" name="password2" class="boxx-inputPwd">
                                        <i class="fa-regular fa-eye-slash eyye eyee-closee"></i>
                                        <i class="fa-regular fa-eye eyye eyee-openn hidden"></i>
                                    </div>
                                    <button type="submit" class="passwordbtn-update">Cập nhật mật khẩu mới</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
     <%- include('../partials/footer') %>
</body>

<script type="text/javascript">
    const inputPwd = document.querySelector(".box-inputPwd");
    const eyeOpen = document.querySelector(".eye-open");
    const eyeClose = document.querySelector(".eye-close");

    const inputPwdd = document.querySelector(".box-inputPwdd");
    const eyeOpenn = document.querySelector(".eye-openn");
    const eyeClosee = document.querySelector(".eye-closee");
    
    const inputtPwd = document.querySelector(".boxx-inputPwd");
    const eyeeOpen = document.querySelector(".eyee-openn");
    const eyeeClose = document.querySelector(".eyee-closee");

    eyeOpen.addEventListener("click", function(){
        eyeOpen.classList.add("hidden");
        eyeClose.classList.remove("hidden");
        inputPwd.setAttribute("type","password");
    })

    eyeClose.addEventListener("click", function(){
        eyeOpen.classList.remove("hidden");
        eyeClose.classList.add("hidden");
        inputPwd.setAttribute("type","text");
    })

    eyeOpenn.addEventListener("click", function(){
        eyeOpenn.classList.add("hidden");
        eyeClosee.classList.remove("hidden");
        inputPwdd.setAttribute("type","password");
    })

    eyeClosee.addEventListener("click", function(){
        eyeOpenn.classList.remove("hidden");
        eyeClosee.classList.add("hidden");
        inputPwdd.setAttribute("type","text");
    })

    eyeeOpen.addEventListener("click", function(){
        eyeeOpen.classList.add("hidden");
        eyeeClose.classList.remove("hidden");
        inputtPwd.setAttribute("type","password");
    })

    eyeeClose.addEventListener("click", function(){
        eyeeOpen.classList.remove("hidden");
        eyeeClose.classList.add("hidden");
        inputtPwd.setAttribute("type","text");
    })

    document.addEventListener("DOMContentLoaded", function() {
        var navLinks = document.querySelectorAll(".nav-links li a");

        // Lặp qua từng mục điều hướng
        navLinks.forEach(function(link) {
            link.addEventListener("click", function(e) {
                e.preventDefault(); // Ngăn chặn hành vi mặc định của liên kết

                // Loại bỏ lớp 'active' từ tất cả các mục điều hướng
                navLinks.forEach(function(link) {
                    link.parentElement.classList.remove("active");
                });

                // Thêm lớp 'active' vào mục điều hướng được nhấp vào
                this.parentElement.classList.add("active");

                // Chuyển hướng đến URL được xác định trong thuộc tính href của thẻ <a>
                var url = this.getAttribute("href");
                window.location.href = url;
            });
        });
    });
</script>

</html>